* Ephemeris Requirement Tracking

| Requirement                                                  | Code refs                                                                                                                                                              | Status/Notes                                                                                            |
|--------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------|
| Swiss Ephemeris version: 2.10.03                             | `mademanifest-engine/pkg/ephemeris/ephemeris.go:16` `mademanifest-engine/pkg/ephemeris/ephemeris.go:18-31`                                                             | Enforced via explicit version check.                                                                    |
| Source archive: swisseph-2.10.03.zip (GitHub release)        | N/A                                                                                                                                                                    | Not enforced in code (no source-archive provenance check in runtime).                                   |
| Ephemeris data path: ephemeris/data/REQUIRED_EPHEMERIS_FILES | `mademanifest-engine/pkg/ephemeris/ephemeris.go:36-40`                                                                                                                 | Partially enforced: defaults to required path, but `SE_EPHE_PATH` env var can override.                 |
| Tropical zodiac only                                         | `mademanifest-engine/pkg/ephemeris/ephemeris.go:49-51` `mademanifest-engine/pkg/human_design/human_design.go:109` `mademanifest-engine/pkg/astrology/astrology.go:41`  | Implicit (uses `SEFLG_SWIEPH` only, no `SEFLG_SIDEREAL`), so tropical default. Not explicitly locked.   |
| No sidereal modes                                            | `mademanifest-engine/pkg/ephemeris/ephemeris.go:49-51` `mademanifest-engine/pkg/human_design/human_design.go:109` `mademanifest-engine/pkg/astrology/astrology.go:41`  | Implicit by absence of `SEFLG_SIDEREAL` / `swephgo.SetSidMode`, not explicitly enforced.                |
| No ayanamsha                                                 | N/A                                                                                                                                                                    | Not enforced in code (no explicit prohibition; no ayanamsha calls found).                               |
| No topocentric corrections                                   | N/A                                                                                                                                                                    | Not enforced explicitly (no `SEFLG_TOPOCTR`/`SetTopo` usage found).                                     |
| No heliocentric mode                                         | N/A                                                                                                                                                                    | Not enforced explicitly (no `SEFLG_HELCTR` usage found).                                                |
| No nutation suppression                                      | `mademanifest-engine/pkg/astrology/astrology.go:41`                                                                                                                    | Contradicted: `SEFLG_NONUT` is set in house calculations.                                           (2) |
| Default Swiss Ephemeris precision                            | `mademanifest-engine/pkg/ephemeris/ephemeris.go:49-51` `mademanifest-engine/pkg/human_design/human_design.go:109` `mademanifest-engine/pkg/astrology/astrology.go:41`  | Implicit: only `SEFLG_SWIEPH` (and `SEFLG_NONUT` for houses), no `SEFLG_SPEED`/`SEFLG_SPEED3`.          |
| Use ephemeris data files only from provided data directory   | `mademanifest-engine/pkg/ephemeris/ephemeris.go:36-40`                                                                                                                 | Partially enforced: default path set, but override allowed via `SE_EPHE_PATH`.                      (3) |
| Mean Node for astrology outputs                              | `mademanifest-engine/pkg/ephemeris/ephemeris.go:77-78` `mademanifest-engine/pkg/ephemeris/ephemeris.go:100-108` `mademanifest-engine/pkg/astrology/astrology.go:68-70` | Enforced by default mean node mapping and handling; can be overridden if `SE_NODE_POLICY=true`.         |
| True Node for Human Design outputs                           | `mademanifest-engine/pkg/human_design/human_design.go:106-114` `mademanifest-engine/pkg/human_design/human_design.go:145-148`                                          | Enforced: explicit true-node calc for Human Design.                                                     |


(2): The `HouseEx` call, to compute ascendent and mc, explicitly sets
     `SEFLG_NONUT` in `mademanifest-engine/pkg/astrology/astrology.go:41`,
     which contradicts `ephemeris/swisseph/FLAGS.md` (“No nutation
     suppression”) and is flagged as a contradiction in
     `doc/requirement-tracking.org`. Also, Swiss Ephemeris docs state
     that `SEFLG_NONUT` switches to the **mean** equator/equinox and
     explicitly recommend using the **true** equator/equinox instead.

     This is done to compute the expected ascendent and mc houses.
     Without SEFLG_NONUT we get wrong houses.

     Relevant refs:
     - Code: `mademanifest-engine/pkg/astrology/astrology.go:41`
     - Spec: `ephemeris/swisseph/FLAGS.md:7-15`
     - Swiss Ephemeris doc recommendation: `ephemeris/swisseph/swisseph-2.10.03/doc/swephprg.md:4272-4280`


(3): cf. swisseph-makefile-install.patch and modified
     ephemeris/swisseph/swisseph-2.10.03/Makefile for the targets
     installating the data files and libswe library.

* General Requirement Tracking (spec/*.pdf)

| Requirement                                                                                   | Code refs                                                                                                                      | Status/Notes                                                                                                                                                  |
|-----------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Deterministic, bit‑exact output for same input                                                | `mademanifest-engine/pkg/emit_golden/emit_golden.go`                                                                           | Implicitly deterministic via ordered emitters; no explicit determinism test or guard.                                                                         |
| No interpretation / meaning / UI / coaching / psychology                                      | N/A                                                                                                                            | Not explicitly enforced; no interpretation modules present.                                                                                                   |
| Calculation outputs only IDs/numbers (no text)                                                | `mademanifest-engine/pkg/emit_golden/emit_golden.go`                                                                           | Not enforced; astrology output includes sign names, and output includes `place_name`/`timezone_iana`.                                                         |
| Input contract fields (birth_date, birth_time, birth_place, timezone)                         | `mademanifest-engine/pkg/emit_golden/emit_golden.go` `mademanifest-engine/pkg/process_input/process_input.go`                  | Partially enforced but with different field names (`birth.date`, `time_hh_mm`, `place_name` + `latitude`/`longitude`, `timezone_iana`); no schema validation. |
| Missing seconds fixed at `00`                                                                 | `mademanifest-engine/cmd/main.go`                                                                                              | Enforced: `parseTime` accepts `HH:MM` and seconds are set to `00`; `SecondsPolicy` asserted as `assume_00`.                                                   |
| Second‑level precision for internal calculations                                              | `mademanifest-engine/pkg/astronomy/time.go` `mademanifest-engine/cmd/main.go`                                                  | Implicit: input has no seconds, UTC→JD uses seconds; no sub‑second inputs used.                                                                               |
| Use IANA timezone database with historical DST                                                | `mademanifest-engine/pkg/astronomy/time.go`                                                                                    | Enforced via `time.LoadLocation` and embedded `tzdata` (historical DST supported).                                                                            |
| Local time → UTC conversion                                                                   | `mademanifest-engine/pkg/astronomy/time.go` `mademanifest-engine/cmd/main.go`                                                  | Enforced.                                                                                                                                                     |
| UTC → Julian Day (UT) conversion                                                              | `mademanifest-engine/pkg/astronomy/time.go`                                                                                    | Enforced.                                                                                                                                                     |
| Ephemeris source: Swiss Ephemeris                                                             | `mademanifest-engine/pkg/ephemeris/ephemeris.go`                                                                               | Enforced (swephgo + version check).                                                                                                                           |
| Tropical zodiac only                                                                          | `mademanifest-engine/pkg/ephemeris/ephemeris.go` `mademanifest-engine/pkg/astrology/astrology.go`                              | Implicit (no sidereal flags); not explicitly locked.                                                                                                          |
| Objects always calculated: Sun–Pluto, Chiron, North Node (mean & true)                        | `mademanifest-engine/pkg/ephemeris/ephemeris.go` `mademanifest-engine/pkg/human_design/human_design.go`                        | Partially enforced: mean node computed in ephemeris; true node computed for Human Design only; no dedicated “true node” output in astrology.                  |
| Earth derived as Sun + 180° (mod 360)                                                         | `mademanifest-engine/pkg/human_design/human_design.go`                                                                         | Enforced for Human Design; ephemeris also computes Earth directly but it is not used in outputs.                                                              |
| Astrology house system: Placidus                                                              | `mademanifest-engine/pkg/astrology/astrology.go`                                                                               | Enforced via `HousesEx` with `hsys = 'P'`.                                                                                                                    |
| Astrology node policy: Mean Node                                                              | `mademanifest-engine/pkg/ephemeris/ephemeris.go` `mademanifest-engine/pkg/astrology/astrology.go`                              | Enforced for astrology output (positions map uses mean node).                                                                                                 |
| Astrology outputs planetary positions, houses, ascendant, midheaven                           | `mademanifest-engine/pkg/astrology/astrology.go` `mademanifest-engine/pkg/emit_golden/emit_golden.go`                          | Partially enforced: outputs positions, ascendant, and MC; house cusps are computed but not emitted.                                                           |
| Human Design snapshots: Personality at birth, Design before birth                             | `mademanifest-engine/pkg/human_design/human_design.go`                                                                         | Enforced.                                                                                                                                                     |
| Human Design node policy: True Node                                                           | `mademanifest-engine/pkg/human_design/human_design.go`                                                                         | Enforced: true node calc for HD.                                                                                                                              |
| Design time target: Sun − 88° (mod 360)                                                       | `mademanifest-engine/pkg/emit_golden/emit_golden.go` `mademanifest-engine/pkg/human_design/human_design.go`                    | Partially enforced: driven by `design_time_solver.sun_offset_deg` input; no validation that it is 88°.                                                        |
| Design time bracket: birth − 84 to 90 days                                                    | `mademanifest-engine/pkg/human_design/human_design.go`                                                                         | Not enforced; uses offset ± 5 days around `sun_offset_deg` and expands if needed.                                                                             |
| Solver method: bisection                                                                      | `mademanifest-engine/pkg/human_design/human_design.go`                                                                         | Enforced (binary search).                                                                                                                                     |
| Stop criteria: abs sun diff < 0.0001° OR time interval < 1 sec                                | `mademanifest-engine/pkg/emit_golden/emit_golden.go` `mademanifest-engine/pkg/human_design/human_design.go`                    | Partially enforced: applied from input values; no validation of required constants.                                                                           |
| Rounding only at final step                                                                   | `mademanifest-engine/pkg/human_design/human_design.go` `mademanifest-engine/pkg/emit_golden/emit_golden.go`                    | Implicit: final formatting uses one‑decimal gate/line; no explicit guard against earlier rounding.                                                            |
| Mandala constants: START 313.25°, GATE_WIDTH 5.625°, LINE_WIDTH 0.9375°                       | `canon/mandala_constants.json` `mademanifest-engine/pkg/canon/canon.go` `mademanifest-engine/pkg/human_design/human_design.go` | Enforced via canon defaults and mapping function.                                                                                                             |
| Interval rule: start inclusive, end exclusive                                                 | `canon/mandala_constants.json` `mademanifest-engine/pkg/canon/canon.go` `mademanifest-engine/cmd/main.go`                      | Enforced: interval rule set in canon and asserted in engine; mapping uses floor logic.                                                                        |
| Mapping formula (r, gate_index, line_index, gate_sequence)                                    | `mademanifest-engine/pkg/human_design/human_design.go`                                                                         | Enforced.                                                                                                                                                     |
| Gate sequence: fixed array of 64 gates (not computed)                                         | `canon/gate_sequence_v1.json` `mademanifest-engine/pkg/canon/canon.go` `mademanifest-engine/pkg/human_design/human_design.go`  | Enforced: loaded from file, length and uniqueness validated.                                                                                                  |
| Human Design output object order (mandatory)                                                  | `mademanifest-engine/pkg/human_design/human_design.go` `mademanifest-engine/pkg/emit_golden/emit_golden.go`                    | Enforced.                                                                                                                                                     |
| Human Design output per snapshot: Gate + Line                                                 | `mademanifest-engine/pkg/human_design/human_design.go` `mademanifest-engine/pkg/emit_golden/emit_golden.go`                    | Enforced.                                                                                                                                                     |
| Derived structures allowed but interpretation forbidden                                       | N/A                                                                                                                            | Not enforced; derived structures (type/authority/profile/cross) are not implemented.                                                                          |
| Gene Keys: derived only from Human Design output                                              | `mademanifest-engine/pkg/gene_keys/gene_keys.go`                                                                               | Enforced.                                                                                                                                                     |
| Gene Keys Activation Sequence mapping                                                         | `mademanifest-engine/pkg/gene_keys/gene_keys.go`                                                                               | Enforced.                                                                                                                                                     |
| No shadow/gift/essence logic                                                                  | N/A                                                                                                                            | Not explicitly enforced; no such logic present.                                                                                                               |
| Content separation: calculation layer unaware of content dictionaries                         | `mademanifest-engine/pkg/emit_golden/emit_golden.go`                                                                           | Partially enforced; no content dictionary usage, but output still contains sign name strings (not purely IDs/numbers).                                        |
| Output metadata includes engine_version, node_policy_per_system, keys_dict versions, language | `mademanifest-engine/cmd/main.go` `mademanifest-engine/pkg/emit_golden/emit_golden.go`                                         | Not enforced: only node policy exists in `engine_contract`; no engine version or dictionary version fields in output.                                         |
| Golden tests + JSON fixtures with fixed expected output                                       | `mademanifest-engine/expected.json` `mademanifest-engine/integration_test.go`                                                  | Not enforced: expected fixture not wired into tests; integration test appears outdated.                                                                       |
| Non‑goals: no birth time rectification / uncertainty modeling                                 | N/A                                                                                                                            | Not explicitly enforced; no related logic found.                                                                                                              |
| Change policy: breaking changes require spec update + fixture revalidation                    | N/A                                                                                                                            | Not enforced in code.                                                                                                                                         |
